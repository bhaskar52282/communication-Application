<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit used</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function updateUser() {
            let updatedFullname = document.getElementById("updatedFullname").value;
            let updatedEmail = document.getElementById("updatedEmail").value;
            //document.getElementsByName("Delete").href
            //let index;

            //let users = JSON.parse(localStorage.getItem("usersLocastorage"));

            if (updatedFullname == "") {
                alert("Please enter Full Name");
                return false;
            } else if (updatedEmail == "") {
                alert("Please enter Email id");
                return false;
            }

            users[i].fullName = updatedFullname;
            users[i].email = updatedEmail;
            //console.log("Done");
            localStorage.setItem("usersLocastorage", JSON.stringify(users));
            return true;
        }
    </script>

</head>

<body>
    <center>
        <h1>Register</h1>
        <form action="./Userlist.html" method="get" onsubmit="return updateUser()">
            <table>
                <tr>
                    <td>Full Name</td>
                    <td><input class="form-control" type="text" name="fullName" id="updatedFullname" /></td>
                </tr>
                <tr>
                    <td>Email</td>
                    <td><input class="form-control" type="email" name="email" id="updatedEmail" /></td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" value="Save" /></td>
                    <td></td>
                </tr>
            </table>
        </form>
    </center>
    <script>
        let userInfo = {
            fullname: " ",
            email: " "
        }
        let url = (window.location.href);
        let urlArray = url.split("?");
        let id = Number(urlArray[1]);
        let users = JSON.parse(localStorage.getItem("usersLocastorage"));
        let i;
        //console.log(typeof id);

        for (i in users) {
            //console.log(typeof (users[i].id));
            if (id === users[i].id) {
                //console.log("Yes");
                userInfo.fullname = users[i].fullName;
                userInfo.email = users[i].email;
                break;
            }
        }
        document.getElementById("updatedFullname").value = userInfo.fullname;
        document.getElementById("updatedEmail").value = userInfo.email;
    </script>

</body>

</html>